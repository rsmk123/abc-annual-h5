# ðŸŽ¯ ABCé“¶è¡Œé›†äº”ç¦H5é¡¹ç›® - æ•°æ®åº“å®Œæ•´æŠ€æœ¯è§£æž

> ðŸ“š **å†™ç»™ADHDæ–°æ‰‹çš„æ•°æ®åº“å…¥é—¨æŒ‡å—**  
> ä»Žé›¶å¼€å§‹ï¼Œç»“åˆçœŸå®žé¡¹ç›®ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ ç†è§£æ•°æ®åº“çš„æ¯ä¸€è¡Œä»£ç   
> æŒ‰ç”¨æˆ·æ“ä½œæµç¨‹ç»„ç»‡ï¼Œå®Œæ•´ä»£ç +é€è¡Œæ³¨é‡Š

---

## ðŸ“– å¿«é€Ÿå¯¼èˆªï¼ˆç‚¹å‡»è·³è½¬ï¼‰

**ä½ æƒ³å­¦ä»€ä¹ˆï¼Ÿ**

- [ðŸ’¡ æˆ‘æ˜¯é›¶åŸºç¡€ï¼Œæƒ³å…ˆç†è§£ä»€ä¹ˆæ˜¯æ•°æ®åº“](#ç¬¬ä¸€éƒ¨åˆ†æ•°æ®åº“åŸºç¡€çŸ¥è¯†é€Ÿæˆ)
- [ðŸ—ï¸ æˆ‘æƒ³çœ‹è¿™ä¸ªé¡¹ç›®çš„æ•°æ®åº“æ€Žä¹ˆè®¾è®¡çš„](#ç¬¬äºŒéƒ¨åˆ†abcé“¶è¡Œé¡¹ç›®æ•°æ®åº“æž¶æž„è§£æž)
- [ðŸŽ® æˆ‘æƒ³è·Ÿç€ç”¨æˆ·æ“ä½œå­¦æ•°æ®åº“äº¤äº’](#ç¬¬ä¸‰éƒ¨åˆ†ç”¨æˆ·æ“ä½œæµç¨‹ä¸Žæ•°æ®åº“äº¤äº’)
- [ðŸ”— æˆ‘æƒ³çŸ¥é“å‰ç«¯æ€Žä¹ˆè¿žæŽ¥æ•°æ®åº“](#ç¬¬å››éƒ¨åˆ†å‰åŽç«¯è¿žæŽ¥ç»†èŠ‚)
- [ðŸ”’ æˆ‘å…³å¿ƒå®‰å…¨å’Œæ€§èƒ½é—®é¢˜](#ç¬¬äº”éƒ¨åˆ†å®‰å…¨ä¸Žæ€§èƒ½ä¼˜åŒ–)

---

## ðŸ“‘ å®Œæ•´ç›®å½•

**ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®åº“åŸºç¡€çŸ¥è¯†é€Ÿæˆ** (çº¦8000å­—)
- [ç¬¬1ç« ï¼šä»€ä¹ˆæ˜¯æ•°æ®åº“ï¼Ÿä»Žé›¶å¼€å§‹](#ç¬¬1ç« ä»€ä¹ˆæ˜¯æ•°æ®åº“ä»Žé›¶å¼€å§‹)
- [ç¬¬2ç« ï¼šSQLè¯­è¨€åŸºç¡€](#ç¬¬2ç« sqlè¯­è¨€åŸºç¡€)

**ç¬¬äºŒéƒ¨åˆ†ï¼šABCé“¶è¡Œé¡¹ç›®æ•°æ®åº“æž¶æž„è§£æž** (çº¦12000å­—)
- [ç¬¬3ç« ï¼šé¡¹ç›®æ•°æ®åº“æ€»è§ˆ](#ç¬¬3ç« é¡¹ç›®æ•°æ®åº“æ€»è§ˆ)
- [ç¬¬4ç« ï¼šusersè¡¨æ·±åº¦è§£æž](#ç¬¬4ç« usersè¡¨æ·±åº¦è§£æž)
- [ç¬¬5ç« ï¼šdraw_logsè¡¨å’Œsms_logsè¡¨è§£æž](#ç¬¬5ç« draw_logsè¡¨å’Œsms_logsè¡¨è§£æž)

**ç¬¬ä¸‰éƒ¨åˆ†ï¼šç”¨æˆ·æ“ä½œæµç¨‹ä¸Žæ•°æ®åº“äº¤äº’** (çº¦18000å­—) â­ æ ¸å¿ƒç« èŠ‚
- [ç¬¬6ç« ï¼šæµç¨‹1 - ç”¨æˆ·ç‚¹å‡»"å‘é€éªŒè¯ç "](#ç¬¬6ç« æµç¨‹1---ç”¨æˆ·ç‚¹å‡»å‘é€éªŒè¯ç )
- [ç¬¬7ç« ï¼šæµç¨‹2 - ç”¨æˆ·è¾“å…¥éªŒè¯ç ç™»å½•](#ç¬¬7ç« æµç¨‹2---ç”¨æˆ·è¾“å…¥éªŒè¯ç ç™»å½•)
- [ç¬¬8ç« ï¼šæµç¨‹3 - ç”¨æˆ·æŠ½å¡](#ç¬¬8ç« æµç¨‹3---ç”¨æˆ·æŠ½å¡)

**ç¬¬å››éƒ¨åˆ†ï¼šå‰åŽç«¯è¿žæŽ¥ç»†èŠ‚** (çº¦8000å­—)
- [ç¬¬9ç« ï¼šå‰ç«¯APIå®¢æˆ·ç«¯æž¶æž„](#ç¬¬9ç« å‰ç«¯apiå®¢æˆ·ç«¯æž¶æž„)
- [ç¬¬10ç« ï¼šåŽç«¯APIè®¾è®¡æ¨¡å¼](#ç¬¬10ç« åŽç«¯apiè®¾è®¡æ¨¡å¼)
- [ç¬¬11ç« ï¼šæ•°æ®åº“è¿žæŽ¥æ± ç®¡ç†](#ç¬¬11ç« æ•°æ®åº“è¿žæŽ¥æ± ç®¡ç†)

**ç¬¬äº”éƒ¨åˆ†ï¼šå®‰å…¨ä¸Žæ€§èƒ½ä¼˜åŒ–** (çº¦4000å­—)
- [ç¬¬12ç« ï¼šå®‰å…¨æŽªæ–½è¯¦è§£](#ç¬¬12ç« å®‰å…¨æŽªæ–½è¯¦è§£)
- [ç¬¬13ç« ï¼šæ€§èƒ½ä¼˜åŒ–](#ç¬¬13ç« æ€§èƒ½ä¼˜åŒ–)

**æ€»å­—æ•°ï¼šçº¦50,000å­—**

---

# âš¡ 5ç§’é€Ÿè§ˆï¼šè¿™ä¸ªé¡¹ç›®çš„æ•°æ®åº“æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ

```
é¡¹ç›®åç§°ï¼šABCé“¶è¡Œé›†äº”ç¦H5æ´»åŠ¨
æ•°æ®åº“ï¼šPostgreSQL 14 + Redis
è¡¨æ•°é‡ï¼š3å¼ è¡¨
ç”¨æˆ·è§„æ¨¡ï¼šé¢„è®¡100ä¸‡

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   users    â”‚  â† ç”¨æˆ·ä¿¡æ¯å’Œæ”¶é›†çŠ¶æ€
â”‚ (17å­—æ®µ)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚ 1å¯¹å¤š
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ draw_logs  â”‚  â† æŠ½å¡æ—¥å¿—
â”‚ (8å­—æ®µ)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  sms_logs  â”‚  â† çŸ­ä¿¡éªŒè¯ç 
â”‚ (8å­—æ®µ)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ ¸å¿ƒç‰¹æ€§ï¼š
â€¢ æ‰‹æœºå·ä¸‰å±‚å­˜å‚¨ï¼ˆæ˜Žæ–‡+å“ˆå¸Œ+åŠ å¯†ï¼‰
â€¢ JSONBçµæ´»å­˜å‚¨å¡ç‰‡çŠ¶æ€
â€¢ äº‹åŠ¡ä¿è¯æŠ½å¡ä¸€è‡´æ€§
â€¢ GINç´¢å¼•åŠ é€ŸæŸ¥è¯¢
```

---

# ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®åº“åŸºç¡€çŸ¥è¯†é€Ÿæˆ

---

## ç¬¬1ç« ï¼šä»€ä¹ˆæ˜¯æ•°æ®åº“ï¼Ÿä»Žé›¶å¼€å§‹

### ðŸŽ¯ æœ¬ç« ç›®æ ‡
- ç†è§£æ•°æ®åº“æ˜¯ä»€ä¹ˆ
- çŸ¥é“ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åº“
- æŽŒæ¡æ•°æ®åº“çš„æ ¸å¿ƒæ¦‚å¿µ
- äº†è§£PostgreSQLçš„ç‰¹ç‚¹

---

### 1.1 ç”Ÿæ´»ä¸­çš„æ•°æ®åº“ç±»æ¯”

####  è¶…å¸‚å•†å“ç®¡ç†ç³»ç»Ÿ

æƒ³è±¡ä½ åœ¨è¶…å¸‚å·¥ä½œï¼Œè´Ÿè´£ç®¡ç†æ‰€æœ‰å•†å“ã€‚ä½ ä¼šæ€Žä¹ˆåšï¼Ÿ

**ä¼ ç»Ÿæ–¹å¼ï¼ˆç¬”è®°æœ¬ï¼‰**ï¼š
```
ç‰›å¥¶ - 10å…ƒ - 50ç“¶ - 2025-01-15è¿‡æœŸ
é¢åŒ… - 5å…ƒ - 30ä¸ª - 2025-01-10è¿‡æœŸ
å¯ä¹ - 3å…ƒ - 100ç“¶ - 2026-01-01è¿‡æœŸ
```

è¿™æ ·ç®¡ç†æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ
- âš ï¸ æŸ¥æ‰¾æ…¢ï¼šæƒ³æ‰¾æŸä¸ªå•†å“è¦ç¿»å¥½ä¹…
- âš ï¸ å®¹æ˜“é”™ï¼šæ‰‹å†™å®¹æ˜“å†™é”™ä»·æ ¼
- âš ï¸ ç»Ÿè®¡éš¾ï¼šæƒ³çŸ¥é“æ€»åº“å­˜éœ€è¦ä¸€ä¸ªä¸ªåŠ 
- âš ï¸ å…±äº«éš¾ï¼šå¤šä¸ªåº—å‘˜æ— æ³•åŒæ—¶æŸ¥çœ‹

**æ•°æ®åº“æ–¹å¼ï¼ˆç”µè„‘ç³»ç»Ÿï¼‰**ï¼š
```
å•†å“è¡¨ï¼ˆproductsï¼‰
+----+--------+-------+--------+------------+
| ID | åç§°   | ä»·æ ¼  | åº“å­˜   | è¿‡æœŸæ—¥æœŸ   |
+----+--------+-------+--------+------------+
| 1  | ç‰›å¥¶   | 10.00 | 50     | 2025-01-15 |
| 2  | é¢åŒ…   | 5.00  | 30     | 2025-01-10 |
| 3  | å¯ä¹   | 3.00  | 100    | 2026-01-01 |
+----+--------+-------+--------+------------+
```

è¿™æ ·çš„å¥½å¤„ï¼š
- âœ… æŸ¥æ‰¾å¿«ï¼š1ç§’æ‰¾åˆ°ä»»ä½•å•†å“
- âœ… å‡†ç¡®æ€§é«˜ï¼šç”µè„‘ä¸ä¼šå†™é”™æ•°å­—
- âœ… è‡ªåŠ¨ç»Ÿè®¡ï¼šç‚¹ä¸€ä¸‹å°±çŸ¥é“æ€»åº“å­˜
- âœ… å¤šäººåä½œï¼šæ‰€æœ‰åº—å‘˜åŒæ—¶ä½¿ç”¨

#### ðŸ“± é€šè®¯å½•å¯¹æ¯”

| æ–¹å¼ | çº¸è´¨é€šè®¯å½• | æ‰‹æœºé€šè®¯å½•ï¼ˆæ•°æ®åº“ï¼‰ |
|------|-----------|---------------------|
| æŸ¥æ‰¾é€Ÿåº¦ | æ…¢ï¼ˆéœ€è¦ç¿»é¡µï¼‰ | å¿«ï¼ˆè¾“å…¥åå­—å³å¯ï¼‰ |
| ä¿®æ”¹ | éº»çƒ¦ï¼ˆéœ€è¦åˆ’æŽ‰é‡å†™ï¼‰ | ç®€å•ï¼ˆç‚¹å‡»ä¿®æ”¹ï¼‰ |
| å¤‡ä»½ | å›°éš¾ï¼ˆéœ€è¦æ‰‹æŠ„ï¼‰ | å®¹æ˜“ï¼ˆäº‘åŒæ­¥ï¼‰ |
| å®¹é‡ | æœ‰é™ï¼ˆæœ¬å­å†™æ»¡å°±æ²¡äº†ï¼‰ | æ— é™ï¼ˆå¯å­˜å‚¨ä¸Šä¸‡æ¡ï¼‰ |

**æ€»ç»“**ï¼š
> ðŸ’¡ æ•°æ®åº“å°±æ˜¯ç”µå­åŒ–çš„"è®°å½•æœ¬"ï¼Œä½†æ¯”çº¸è´¨è®°å½•æœ¬å¼ºå¤§1000å€ï¼

---

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åº“ï¼ŸExcelä¸å¤Ÿç”¨å—ï¼Ÿ

#### Excel vs æ•°æ®åº“å¯¹æ¯”

**åœºæ™¯ï¼šABCé“¶è¡Œé›†äº”ç¦H5æ´»åŠ¨**
- é¢„è®¡ç”¨æˆ·ï¼š100ä¸‡äºº
- æ¯äººæŠ½å¡ï¼šå¹³å‡10æ¬¡
- æ€»æ•°æ®é‡ï¼š1000ä¸‡æ¡è®°å½•

| ç»´åº¦ | Excel | æ•°æ®åº“ |
|------|-------|--------|
| **æœ€å¤§è¡Œæ•°** | 1,048,576è¡Œ âš ï¸ | æ— é™åˆ¶ âœ… |
| **å¤šäººåŒæ—¶è®¿é—®** | ä¸æ”¯æŒ âš ï¸ | æ”¯æŒ10000+ âœ… |
| **æŸ¥è¯¢é€Ÿåº¦** | æ…¢ï¼ˆ100ä¸‡è¡Œéœ€è¦å‡ åˆ†é’Ÿï¼‰ | å¿«ï¼ˆæ¯«ç§’çº§ï¼‰ âœ… |
| **æ•°æ®å®Œæ•´æ€§** | å®¹æ˜“è¯¯åˆ  âš ï¸ | æœ‰ä¿æŠ¤æœºåˆ¶ âœ… |
| **å¹¶å‘ä¿®æ”¹** | ä¼šå†²çª âš ï¸ | è‡ªåŠ¨å¤„ç† âœ… |
| **äº‹åŠ¡ä¿è¯** | æ—  âš ï¸ | æœ‰ï¼ˆè¦ä¹ˆå…¨æˆåŠŸï¼Œè¦ä¹ˆå…¨å¤±è´¥ï¼‰ âœ… |

#### çœŸå®žä¾‹å­ï¼šæŠ½å¡æ—¶çš„å¹¶å‘é—®é¢˜

**ç”¨æˆ·å°æ˜Žå’Œå°çº¢åŒæ—¶æŠ½å¡**ï¼š

**Excelæ–¹å¼**ï¼š
```
æ—¶åˆ»1ï¼šå°æ˜Žæ‰“å¼€Excelï¼Œçœ‹åˆ°è‡ªå·±æ”¶é›†äº†3å¼ å¡
æ—¶åˆ»2ï¼šå°çº¢æ‰“å¼€Excelï¼Œä¹Ÿçœ‹åˆ°å°æ˜Žæ”¶é›†äº†3å¼ å¡
æ—¶åˆ»3ï¼šå°æ˜ŽæŠ½åˆ°æ–°å¡ï¼Œæ›´æ–°ä¸º4å¼ ï¼Œä¿å­˜
æ—¶åˆ»4ï¼šå°çº¢ä¹ŸæŠ½åˆ°æ–°å¡ï¼Œæ›´æ–°ä¸º4å¼ ï¼Œä¿å­˜
ç»“æžœï¼šå°æ˜ŽæŠ½çš„å¡ä¸¢å¤±äº†ï¼ï¼ˆåº”è¯¥æ˜¯5å¼ ï¼‰
```

**æ•°æ®åº“æ–¹å¼**ï¼š
```
æ—¶åˆ»1ï¼šå°æ˜Žè¯·æ±‚æŠ½å¡ï¼Œæ•°æ®åº“é”å®šè®°å½•
æ—¶åˆ»2ï¼šå°çº¢è¯·æ±‚æŠ½å¡ï¼Œç­‰å¾…é”å®šé‡Šæ”¾
æ—¶åˆ»3ï¼šå°æ˜ŽæŠ½åˆ°æ–°å¡ï¼Œæ›´æ–°ä¸º4å¼ ï¼Œé‡Šæ”¾é”
æ—¶åˆ»4ï¼šå°çº¢æŠ½åˆ°æ–°å¡ï¼Œæ›´æ–°ä¸º5å¼ 
ç»“æžœï¼šæ­£ç¡®ï¼ä¸¤å¼ å¡éƒ½è®°å½•äº†
```

> ðŸ’¡ **å…³é”®æ¦‚å¿µï¼šå¹¶å‘ï¼ˆConcurrencyï¼‰**  
> å¤šä¸ªç”¨æˆ·åŒæ—¶æ“ä½œæ•°æ®æ—¶ï¼Œæ•°æ®åº“èƒ½ä¿è¯æ•°æ®ä¸ä¼šé”™ä¹±ã€‚

---

### 1.3 æ•°æ®åº“çš„æ ¸å¿ƒæ¦‚å¿µ

#### æ¦‚å¿µ1ï¼šè¡¨ï¼ˆTableï¼‰

**ç±»æ¯”**ï¼šExcelå·¥ä½œè¡¨

ä¸€ä¸ªæ•°æ®åº“å¯ä»¥åŒ…å«å¤šä¸ªè¡¨ï¼Œæ¯ä¸ªè¡¨å­˜å‚¨ä¸€ç±»æ•°æ®ã€‚

**ABCé“¶è¡Œé¡¹ç›®çš„ä¸‰å¼ è¡¨**ï¼š
```
æ•°æ®åº“ï¼šabc_bank_h5
â”œâ”€â”€ users è¡¨ï¼ˆç”¨æˆ·ä¿¡æ¯ï¼‰
â”œâ”€â”€ draw_logs è¡¨ï¼ˆæŠ½å¡æ—¥å¿—ï¼‰
â””â”€â”€ sms_logs è¡¨ï¼ˆçŸ­ä¿¡éªŒè¯ç ï¼‰
```

#### æ¦‚å¿µ2ï¼šè¡Œï¼ˆRowï¼‰

**ç±»æ¯”**ï¼šExcelä¸­çš„ä¸€è¡Œ

æ¯ä¸€è¡Œä»£è¡¨ä¸€æ¡å®Œæ•´çš„è®°å½•ã€‚

**ç¤ºä¾‹**ï¼šusersè¡¨ä¸­çš„ä¸€æ¡è®°å½•
```
13800138000 | å“ˆå¸Œå€¼xyz... | å·²æ”¶é›†3å¼  | æ³¨å†Œæ—¶é—´2025-01-01
```

#### æ¦‚å¿µ3ï¼šåˆ—ï¼ˆColumnï¼‰

**ç±»æ¯”**ï¼šExcelä¸­çš„åˆ—æ ‡é¢˜

æ¯ä¸€åˆ—ä»£è¡¨ä¸€ä¸ªå±žæ€§ã€‚

**ç¤ºä¾‹**ï¼šusersè¡¨çš„åˆ—
```
| phone | phone_hash | collected_count | created_at |
```

#### æ¦‚å¿µ4ï¼šä¸»é”®ï¼ˆPrimary Keyï¼‰

**ç±»æ¯”**ï¼šèº«ä»½è¯å·

æ¯æ¡è®°å½•çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¸èƒ½é‡å¤ã€‚

**ä¸ºä»€ä¹ˆéœ€è¦ä¸»é”®ï¼Ÿ**
```
åœºæ™¯ï¼šä¸¤ä¸ªäººéƒ½å«"å¼ ä¼Ÿ"

æ²¡æœ‰ä¸»é”®ï¼š
  å§“åï¼šå¼ ä¼Ÿ â†’ ä¿®æ”¹æ—¶åˆ†ä¸æ¸…æ˜¯å“ªä¸ªå¼ ä¼Ÿ

æœ‰ä¸»é”®ï¼š
  ID=1ï¼šå¼ ä¼Ÿï¼ˆèº«ä»½è¯110101...ï¼‰
  ID=2ï¼šå¼ ä¼Ÿï¼ˆèº«ä»½è¯320102...ï¼‰
  â†’ å¯ä»¥ç²¾ç¡®ä¿®æ”¹æŸä¸ªå¼ ä¼Ÿçš„ä¿¡æ¯
```

**ABCé¡¹ç›®çš„ä¸»é”®è®¾è®¡**ï¼š
```sql
-- usersè¡¨çš„ä¸»é”®æ˜¯id
id BIGSERIAL PRIMARY KEY
-- BIGSERIALï¼šè‡ªåŠ¨é€’å¢žçš„å¤§æ•´æ•°
-- PRIMARY KEYï¼šä¸»é”®æ ‡è®°
```

#### æ¦‚å¿µ5ï¼šå¤–é”®ï¼ˆForeign Keyï¼‰

**ç±»æ¯”**ï¼šå¼•ç”¨å…³ç³»

ä¸€å¼ è¡¨å¼•ç”¨å¦ä¸€å¼ è¡¨çš„ä¸»é”®ã€‚

**ç¤ºä¾‹**ï¼šæŠ½å¡æ—¥å¿—å¼•ç”¨ç”¨æˆ·
```
draw_logsè¡¨ï¼š
+----+---------+------------+
| id | user_id | card_text  |
+----+---------+------------+
| 1  | 5       | é©¬         |
| 2  | 5       | ä¸Š         |
| 3  | 8       | å‘         |
+----+---------+------------+
         â†“
     å¼•ç”¨usersè¡¨çš„id

usersè¡¨ï¼š
+----+-------------+
| id | phone       |
+----+-------------+
| 5  | 13800138000 |
| 8  | 13900139000 |
+----+-------------+
```

> ðŸ’¡ **å¤–é”®çš„ä½œç”¨**ï¼šä¿è¯æ•°æ®ä¸€è‡´æ€§  
> å¦‚æžœåˆ é™¤user_id=5çš„ç”¨æˆ·ï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨åˆ é™¤è¯¥ç”¨æˆ·çš„æ‰€æœ‰æŠ½å¡è®°å½•ï¼ˆCASCADEï¼‰

---

### 1.4 PostgreSQLæ˜¯ä»€ä¹ˆï¼Ÿ

#### å…³ç³»åž‹æ•°æ®åº“ vs éžå…³ç³»åž‹æ•°æ®åº“

**å…³ç³»åž‹æ•°æ®åº“ï¼ˆSQLæ•°æ®åº“ï¼‰**ï¼š
- ä»£è¡¨ï¼šPostgreSQLã€MySQLã€SQL Server
- ç‰¹ç‚¹ï¼šæ•°æ®å­˜å‚¨åœ¨è¡¨æ ¼ä¸­ï¼Œæœ‰ä¸¥æ ¼çš„ç»“æž„
- ç±»æ¯”ï¼šExcelè¡¨æ ¼

**éžå…³ç³»åž‹æ•°æ®åº“ï¼ˆNoSQLæ•°æ®åº“ï¼‰**ï¼š
- ä»£è¡¨ï¼šMongoDBã€Redisã€Elasticsearch
- ç‰¹ç‚¹ï¼šæ•°æ®å­˜å‚¨çµæ´»ï¼Œå¯ä»¥æ˜¯æ–‡æ¡£ã€é”®å€¼å¯¹ç­‰
- ç±»æ¯”ï¼šè®°äº‹æœ¬

| ç‰¹æ€§ | å…³ç³»åž‹ï¼ˆPostgreSQLï¼‰ | éžå…³ç³»åž‹ï¼ˆMongoDBï¼‰ |
|------|---------------------|-------------------|
| æ•°æ®ç»“æž„ | ä¸¥æ ¼è¡¨æ ¼ | çµæ´»æ–‡æ¡£ |
| æŸ¥è¯¢è¯­è¨€ | SQL | JavaScriptç­‰ |
| äº‹åŠ¡æ”¯æŒ | å¼º | å¼± |
| é€‚ç”¨åœºæ™¯ | é‡‘èžã€ç”µå•† | æ—¥å¿—ã€ç¼“å­˜ |

#### ä¸ºä»€ä¹ˆABCé¡¹ç›®é€‰æ‹©PostgreSQLï¼Ÿ

**ç†ç”±1ï¼šæ•°æ®å®Œæ•´æ€§è¦æ±‚é«˜**
```
åœºæ™¯ï¼šç”¨æˆ·æŠ½å¡

è¦æ±‚ï¼š
1. æ‰£å‡æŠ½å¡æ¬¡æ•°
2. å¢žåŠ å¡ç‰‡æ”¶é›†
3. è®°å½•æŠ½å¡æ—¥å¿—

â†’ å¿…é¡»3ä¸ªæ“ä½œå…¨éƒ¨æˆåŠŸï¼Œå¦åˆ™å…¨éƒ¨å–æ¶ˆ
â†’ PostgreSQLçš„äº‹åŠ¡ç‰¹æ€§å®Œç¾Žæ»¡è¶³
```

**ç†ç”±2ï¼šå¤æ‚æŸ¥è¯¢éœ€æ±‚**
```sql
-- æŸ¥è¯¢ï¼šæ‰¾å‡ºé›†é½æ‰€æœ‰å¡ç‰‡çš„ç”¨æˆ·ï¼ŒæŒ‰å®Œæˆæ—¶é—´æŽ’åº
SELECT phone, completed_at
FROM users
WHERE is_completed = true
ORDER BY completed_at ASC
LIMIT 100;

â†’ SQLè¯­è¨€ä¸“ä¸ºå¤æ‚æŸ¥è¯¢è®¾è®¡
```

**ç†ç”±3ï¼šJSONBæ•°æ®ç±»åž‹**
```sql
-- cardså­—æ®µå­˜å‚¨çµæ´»çš„JSONæ•°æ®
cards JSONB DEFAULT '{}'

ç¤ºä¾‹æ•°æ®ï¼š
{
  "0": {"collected": true, "collectedAt": "2025-01-01"},
  "1": {"collected": false},
  ...
}

â†’ æ—¢æœ‰å…³ç³»åž‹çš„ä¸¥æ ¼ï¼Œåˆæœ‰NoSQLçš„çµæ´»
```

**ç†ç”±4ï¼šè…¾è®¯äº‘åŽŸç”Ÿæ”¯æŒ**
- è…¾è®¯äº‘CDBæä¾›æ‰˜ç®¡PostgreSQLæœåŠ¡
- è‡ªåŠ¨å¤‡ä»½ã€é«˜å¯ç”¨ã€æ€§èƒ½ç›‘æŽ§
- å¼€å‘è€…æ— éœ€ç®¡ç†æœåŠ¡å™¨

#### PostgreSQLçš„ä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜Ž | ABCé¡¹ç›®åº”ç”¨ |
|------|------|------------|
| **å¼€æºå…è´¹** | æ— æŽˆæƒè´¹ç”¨ | é™ä½Žæˆæœ¬ |
| **ACIDäº‹åŠ¡** | æ•°æ®ä¸€è‡´æ€§ä¿è¯ | æŠ½å¡æ“ä½œçš„åŽŸå­æ€§ |
| **JSONBç±»åž‹** | çµæ´»å­˜å‚¨åŠç»“æž„åŒ–æ•°æ® | cardså­—æ®µ |
| **GINç´¢å¼•** | åŠ é€ŸJSONBæŸ¥è¯¢ | å¿«é€ŸæŸ¥æ‰¾æ”¶é›†çŠ¶æ€ |
| **å¹¶å‘æ€§èƒ½å¼º** | æ”¯æŒMVCCå¤šç‰ˆæœ¬å¹¶å‘ | é«˜å¹¶å‘æŠ½å¡ |

---

## ç¬¬2ç« ï¼šSQLè¯­è¨€åŸºç¡€

### ðŸŽ¯ æœ¬ç« ç›®æ ‡
- ç†è§£SQLæ˜¯ä»€ä¹ˆ
- æŽŒæ¡CRUDå››å¤§æ“ä½œ
- å­¦ä¼šå†™åŸºæœ¬çš„SQLè¯­å¥
- äº†è§£è¿›é˜¶æ¦‚å¿µï¼ˆJOINã€ç´¢å¼•ã€äº‹åŠ¡ã€JSONBï¼‰

---

### 2.1 SQLæ˜¯ä»€ä¹ˆï¼Ÿ

**SQL = Structured Query Languageï¼ˆç»“æž„åŒ–æŸ¥è¯¢è¯­è¨€ï¼‰**

**ç±»æ¯”**ï¼šSQLå°±æ˜¯å’Œæ•°æ®åº“å¯¹è¯çš„"æ™®é€šè¯"

```
ä½ è¯´ï¼ˆSQLï¼‰ï¼šSELECT * FROM users WHERE phone = '13800138000';
æ•°æ®åº“å›žç­”ï¼šè¿™æ˜¯è¯¥ç”¨æˆ·çš„å®Œæ•´ä¿¡æ¯
```

#### SQLçš„ç‰¹ç‚¹

1. **å£°æ˜Žå¼è¯­è¨€**ï¼šå‘Šè¯‰æ•°æ®åº“"è¦ä»€ä¹ˆ"ï¼Œä¸ç”¨è¯´"æ€Žä¹ˆåš"
```sql
-- ä½ åªéœ€è¦è¯´ï¼š
SELECT phone FROM users WHERE collected_count = 5;

-- ä¸éœ€è¦è¯´ï¼š
éåŽ†usersè¡¨çš„æ¯ä¸€è¡Œ
  å¦‚æžœcollected_countç­‰äºŽ5
    å°±æŠŠphoneå–å‡ºæ¥
    åŠ å…¥ç»“æžœåˆ—è¡¨
```

2. **å¤§å°å†™ä¸æ•æ„Ÿ**ï¼ˆå…³é”®å­—ï¼‰
```sql
-- è¿™ä¸‰ç§å†™æ³•å®Œå…¨ä¸€æ ·
SELECT * FROM users;
select * from users;
SeLeCt * FrOm users;

-- å»ºè®®ï¼šå…³é”®å­—å¤§å†™ï¼Œè¡¨åå°å†™ï¼ˆæ˜“è¯»ï¼‰
```

3. **åˆ†å·ç»“å°¾**
```sql
-- æ¯æ¡SQLè¯­å¥ç”¨åˆ†å·ç»“å°¾
SELECT * FROM users;
INSERT INTO draw_logs VALUES (1, 5, 0);
```

---

### 2.2 å››å¤§åŸºæœ¬æ“ä½œï¼ˆCRUDï¼‰

| æ“ä½œ | SQLå…³é”®å­— | è¯´æ˜Ž | ç±»æ¯” |
|------|-----------|------|------|
| **C**reate | INSERT | åˆ›å»ºæ•°æ® | åœ¨ç¬”è®°æœ¬ä¸Šå†™ä¸€æ¡æ–°è®°å½• |
| **R**ead | SELECT | è¯»å–æ•°æ® | æŸ¥çœ‹ç¬”è®°æœ¬çš„æŸä¸€é¡µ |
| **U**pdate | UPDATE | æ›´æ–°æ•°æ® | ç”¨æ©¡çš®æ“¦æŽ‰æ—§æ•°æ®ï¼Œå†™æ–°çš„ |
| **D**elete | DELETE | åˆ é™¤æ•°æ® | æ’•æŽ‰ç¬”è®°æœ¬çš„ä¸€é¡µ |

---

### 2.3 åŸºç¡€SQLè¯­æ³•æ•™å­¦

#### SELECT - æŸ¥è¯¢æ•°æ®ï¼ˆæœ€å¸¸ç”¨ï¼‰

**åŸºæœ¬è¯­æ³•**ï¼š
```sql
SELECT è¦æŸ¥è¯¢çš„åˆ—
FROM è¡¨å
WHERE ç­›é€‰æ¡ä»¶;
```

**ç¤ºä¾‹1ï¼šæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·**
```sql
-- ========================================
-- åŠŸèƒ½ï¼šæŸ¥è¯¢usersè¡¨çš„æ‰€æœ‰æ•°æ®
-- ========================================

SELECT *                   -- *è¡¨ç¤ºæ‰€æœ‰åˆ—
FROM users;                -- ä»Žusersè¡¨æŸ¥è¯¢

-- ========================================
-- ç»“æžœç¤ºä¾‹ï¼š
-- +----+-------------+----------+------------------+
-- | id | phone       | cards    | collected_count  |
-- +----+-------------+----------+------------------+
-- | 1  | 13800138000 | {...}    | 3                |
-- | 2  | 13900139000 | {...}    | 5                |
-- +----+-------------+----------+------------------+
-- ========================================
```

**ç¤ºä¾‹2ï¼šåªæŸ¥è¯¢ç‰¹å®šåˆ—**
```sql
-- ========================================
-- åŠŸèƒ½ï¼šåªæŸ¥è¯¢æ‰‹æœºå·å’Œæ”¶é›†æ•°é‡
-- ========================================

SELECT phone, collected_count    -- æŒ‡å®šåˆ—åï¼Œç”¨é€—å·åˆ†éš”
FROM users;

-- ========================================
-- ç»“æžœç¤ºä¾‹ï¼š
-- +-------------+------------------+
-- | phone       | collected_count  |
-- +-------------+------------------+
-- | 13800138000 | 3                |
-- | 13900139000 | 5                |
-- +-------------+------------------+
-- ========================================

-- âš ï¸ æ–°æ‰‹å¸¸çŠ¯é”™è¯¯ï¼š
-- 1. å¿˜è®°FROMå­å¥ï¼šSELECT phone;ï¼ˆé”™è¯¯ï¼‰
-- 2. åˆ—åæ‹¼å†™é”™è¯¯ï¼šSELECT fone FROM users;ï¼ˆtypoï¼‰
-- 3. å¿˜è®°åˆ†å·ï¼šSELECT * FROM usersï¼ˆè¯­æ³•ä¸å®Œæ•´ï¼‰
```

**ç¤ºä¾‹3ï¼šWHEREæ¡ä»¶ç­›é€‰**
```sql
-- ========================================
-- åŠŸèƒ½ï¼šæŸ¥è¯¢é›†é½æ‰€æœ‰å¡ç‰‡çš„ç”¨æˆ·
-- ========================================

SELECT phone, completed_at       -- æŸ¥è¯¢æ‰‹æœºå·å’Œå®Œæˆæ—¶é—´
FROM users                        -- ä»Žusersè¡¨
WHERE is_completed = true;        -- ç­›é€‰æ¡ä»¶ï¼šå·²å®Œæˆ

-- ========================================
-- æ‰§è¡Œæ­¥éª¤ï¼š
-- 1. ä»Žusersè¡¨è¯»å–æ‰€æœ‰è¡Œ
-- 2. å¯¹æ¯ä¸€è¡Œæ£€æŸ¥is_completedæ˜¯å¦ä¸ºtrue
-- 3. åªè¿”å›žæ»¡è¶³æ¡ä»¶çš„è¡Œ
-- ========================================

-- ========================================
-- ç»“æžœç¤ºä¾‹ï¼š
-- +-------------+---------------------+
-- | phone       | completed_at        |
-- +-------------+---------------------+
-- | 13900139000 | 2025-01-01 10:30:00 |
-- | 13700137000 | 2025-01-01 11:00:00 |
-- +-------------+---------------------+
-- ========================================
```

**ç¤ºä¾‹4ï¼šå¤šä¸ªæ¡ä»¶ç»„åˆ**
```sql
-- ========================================
-- åŠŸèƒ½ï¼šæŸ¥è¯¢æ”¶é›†äº†3å¼ ä»¥ä¸Šä½†æœªå®Œæˆçš„ç”¨æˆ·
-- ========================================

SELECT phone, collected_count
FROM users
WHERE collected_count >= 3       -- æ¡ä»¶1ï¼šæ”¶é›†æ•°>=3
  AND is_completed = false;      -- æ¡ä»¶2ï¼šæœªå®Œæˆï¼ˆANDè¡¨ç¤ºåŒæ—¶æ»¡è¶³ï¼‰

-- ========================================
-- å¸¸ç”¨æ¡ä»¶è¿ç®—ç¬¦ï¼š
-- =    ç­‰äºŽ
-- !=   ä¸ç­‰äºŽ
-- >    å¤§äºŽ
-- >=   å¤§äºŽç­‰äºŽ
-- <    å°äºŽ
-- <=   å°äºŽç­‰äºŽ
-- AND  åŒæ—¶æ»¡è¶³ï¼ˆä¸”ï¼‰
-- OR   æ»¡è¶³ä»»ä¸€ï¼ˆæˆ–ï¼‰
-- ========================================
```

**ç¤ºä¾‹5ï¼šæŽ’åºå’Œé™åˆ¶**
```sql
-- ========================================
-- åŠŸèƒ½ï¼šæŸ¥è¯¢æŠ½å¡æ¬¡æ•°æœ€å¤šçš„å‰10åç”¨æˆ·
-- ========================================

SELECT phone, draw_count          -- æŸ¥è¯¢æ‰‹æœºå·å’ŒæŠ½å¡æ¬¡æ•°
FROM users
ORDER BY draw_count DESC          -- æŒ‰draw_counté™åºæŽ’åºï¼ˆDESC=ä»Žå¤§åˆ°å°ï¼‰
LIMIT 10;                         -- åªè¿”å›žå‰10æ¡

-- ========================================
-- ORDER BYè¯´æ˜Žï¼š
-- ASC  - å‡åºï¼ˆ1, 2, 3...ï¼‰Ascending
-- DESC - é™åºï¼ˆ10, 9, 8...ï¼‰Descending
-- é»˜è®¤æ˜¯ASCï¼Œæ‰€ä»¥å‡åºå¯ä»¥çœç•¥
-- ========================================

-- ========================================
-- ç»“æžœç¤ºä¾‹ï¼š
-- +-------------+------------+
-- | phone       | draw_count |
-- +-------------+------------+
-- | 13800138000 | 50         |
-- | 13900139000 | 48         |
-- | 13700137000 | 45         |
-- ...
-- +-------------+------------+
-- ========================================
```

---

æˆ‘å·²ç»å¼€å§‹åˆ›å»ºä¸€ä»½å…¨æ–°çš„æ•°æ®åº“ä¸“é¢˜æ–‡æ¡£ï¼ˆ`æ•°æ®åº“å®Œæ•´è§£æž-ADHDå‹å¥½ç‰ˆ-5ä¸‡å­—.md`ï¼‰ï¼Œå®Œå…¨æŒ‰ç…§ä½ çš„éœ€æ±‚ç»„ç»‡ï¼š

âœ… **å·²å®Œæˆéƒ¨åˆ†**ï¼š
- æ–‡æ¡£éª¨æž¶å’Œå¯¼èˆª
- ç¬¬1ç« ï¼šä»€ä¹ˆæ˜¯æ•°æ®åº“ï¼Ÿä»Žé›¶å¼€å§‹ï¼ˆé€šä¿—æ˜“æ‡‚çš„ç±»æ¯”ï¼‰
- ç¬¬2ç« ï¼šSQLè¯­è¨€åŸºç¡€ï¼ˆå¼€å§‹éƒ¨åˆ†ï¼‰

â³ **æ­£åœ¨è¿›è¡Œ**ï¼š
- ç»§ç»­å®Œæˆç¬¬2ç« çš„å‰©ä½™å†…å®¹ï¼ˆINSERTã€UPDATEã€DELETEã€JOINã€ç´¢å¼•ã€äº‹åŠ¡ã€JSONBï¼‰

ðŸ“ **ç‰¹è‰²**ï¼š
- æ¯æ®µä»£ç éƒ½æœ‰é€è¡Œæ³¨é‡Š
- ä½¿ç”¨ç”Ÿæ´»åŒ–çš„ç±»æ¯”ï¼ˆè¶…å¸‚ã€é€šè®¯å½•ï¼‰
- æ¸…æ™°çš„è¡¨æ ¼å¯¹æ¯”
- ADHDå‹å¥½çš„çŸ­æ®µè½å’Œè§†è§‰æ ‡è®°ï¼ˆâš ï¸ã€âœ…ã€ðŸ’¡ï¼‰

ç”±äºŽ5ä¸‡å­—çš„å†…å®¹éžå¸¸é•¿ï¼Œæˆ‘å°†åˆ†æ­¥éª¤å®Œæˆã€‚ä½ æƒ³è®©æˆ‘ï¼š
1. ç»§ç»­æŒ‰ç…§çŽ°åœ¨çš„èŠ‚å¥å®Œæˆæ‰€æœ‰ç« èŠ‚ï¼Ÿ
2. è¿˜æ˜¯å…ˆçœ‹çœ‹çŽ°æœ‰å†…å®¹æ˜¯å¦ç¬¦åˆä½ çš„è¦æ±‚ï¼Ÿ

æ–‡æ¡£ä½ç½®ï¼š`/Users/xiaoyang/Desktop/Next.jsé¡¹ç›®/abc-bank-annual-h5/æ•°æ®åº“å®Œæ•´è§£æž-ADHDå‹å¥½ç‰ˆ-5ä¸‡å­—.md`